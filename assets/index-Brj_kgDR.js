import{a as J,r as l,j as e,u as W,L as S,b as K,c as Y,P as ie,R as Z,N as le,d as ce,e as b,B as de,f as ue}from"./vendor-CARpvBD0.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();const me=""+new URL("video-locadora-retro-logo-M4WB8AE4.png",import.meta.url).href,he={VITE_BACKEND_DOMAIN:"147.185.221.212",VITE_BACKEND_PORT:"48815",VITE_PRODUCTION_URL:"https://my-json-server.typicode.com/typicode/demo/"},{VITE_BACKEND_PORT:pe,VITE_BACKEND_DOMAIN:fe,VITE_PRODUCTION_URL:ge}=he;async function xe(a){try{await L.post("/telemetria",{mensagem:"Erro ao comunicar com API",erro:a,timestamp:new Date().toISOString()})}catch(t){console.error("Erro ao enviar telemetria:",t.message)}}async function D(a,...t){try{const s=await a(...t);if(!s)throw new Error(`Resposta invÃ¡lida da API: ${s}`);if(s.status===204)return null;if(s.data===void 0||s.data===null||typeof s.data!="object")throw new Error(`Resposta invÃ¡lida da API: ${JSON.stringify(s.data)}`);const o=s.data,r=o.content??o.data??o.result??o??null;if(r===null)throw new Error("Nenhum campo de conteÃºdo encontrado em response.data");return r}catch(s){const o=s.response?.data?.message||s.message||"Erro desconhecido",n=(s.response?.data?.errors||[]).map(i=>`${i.field}: ${i.message}`).join("; "),c=n?`${o} - Detalhes: ${n}`:o;throw await xe(s.response?.data||s.toString()),E(`[handleRequest] âŒ ${c}`,"danger"),c}}async function G(){return D(ve.get,"posts",{headers:{Accept:"application/json"}})}async function Q(a){return D(L.get,a,{headers:{Accept:"application/json"}})}async function je(a,t){return D(L.post,a,t)}async function be(a,t,s){return D(L.put,`${a}/${t}`,s)}async function ye(a,t){return D(L.delete,`${a}/${t}`)}function E(a,t="info"){typeof window.addAlert=="function"?window.addAlert(a,t):console.warn(`[ALERTA] ${t.toUpperCase()}: ${a}`)}function X(a){return a&&a=="local"?`http://${fe}:${pe}/api`:ge}const ee=["atores","classes","diretores","titulos","itens"],L=J.create({baseURL:X("local"),timeout:1e4,headers:{Authorization:`Bearer ${new Date}`,"Content-Type":"application/json"}}),ve=J.create({baseURL:X("production"),timeout:1e4,headers:{Authorization:`Bearer ${new Date}`,"Content-Type":"application/json"}});let m={};async function w(a){const t=`${a}Array`;try{E(`ðŸ”„ Buscando ${a} da API...`,"info");const s=await Q(a);return m[t]=s,console.log(`[API] Dados carregados de ${a}:`,s),s}catch{console.warn(`[LOCAL] Falha ao carregar ${a}, usando demo.`);const o=await G();return m[t]=o,E(`âš ï¸ Usando dados locais para ${a}`,"warning"),o}}async function Ne(){for(const a of ee)await w(a)}async function ae(a,t){if(!a){for(const o of ee)await ae(o);return}const s=`${a}Array`;console.log(`[SYNC] Sincronizando ${a}...`);try{const o=await Q(a);m[s]=o,typeof t=="function"&&t(o),console.log(`[SYNC] ${a} sincronizado:`,o)}catch{console.warn(`[SYNC] Falha ao sincronizar ${a}. Usando demo.`);const r=await G();m[s]=r,typeof t=="function"&&t(r),E(`âŒ Falha ao sincronizar ${a}`,"danger")}}const I=l.createContext(),we=({children:a})=>{const[t,s]=l.useState(!1),[o,r]=l.useState(!1),[n,c]=l.useState(null);return l.useEffect(()=>{(async()=>{try{await Ne()}catch(i){window.addAlert(`âŒ Falha ao sincronizar dados! ${i}`,"danger")}finally{s(!0)}})()},[]),e.jsx(I.Provider,{value:{loaded:t,userLoged:o,setUserLoged:r,user:n,setUser:c},children:a})},Ae=()=>{const{userLoged:a,setUserLoged:t,user:s}=l.useContext(I),o=W(),r=()=>{a&&t(!1),o("/")};return e.jsxs("header",{className:"navbar navbar-dark bg-dark px-3 justify-content-between",children:[e.jsxs(S,{to:"/",className:"navbar-brand d-flex align-items-center",children:[e.jsx("img",{src:me,alt:"VideoLocadora",style:{height:"40px",marginRight:"10px"}}),e.jsx("span",{children:"VideoLocadora"})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[a&&s&&e.jsxs("span",{className:"text fw-bold fst-italic fs-5 me-3",children:["Bem-vindo, @",s]}),e.jsx("button",{className:"btn btn-warning",onClick:r,children:a?"Sair":"Entrar"})]})]})},Ee=({links:a=[]})=>{const t=K();return e.jsxs("aside",{className:"bg-light border rounded p-3",children:[e.jsx("h4",{className:"mb-3",children:"Menu"}),e.jsx("nav",{children:e.jsx("ul",{className:"list-group",children:a.map((s,o)=>{const r=t.pathname===s.path;return e.jsx("li",{className:`list-group-item ${r?"active-link":""}`,children:e.jsx(S,{to:s.path,children:s.label})},o)})})})]})},B=({show:a,title:t,message:s,onConfirm:o,onCancel:r})=>{if(!a)return null;const n=()=>{o&&o()},c=()=>{r&&r()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-backdrop-fade"}),e.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:t}),e.jsx("button",{type:"button",className:"btn-close",onClick:c})]}),e.jsx("div",{className:"modal-body",children:e.jsx("p",{children:s})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:c,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary",onClick:n,children:"Ok"})]})]})})})]})},te=({message:a,type:t="success",duration:s=3e3})=>{const[o,r]=l.useState(!0);return l.useEffect(()=>{const n=setTimeout(()=>r(!1),s);return()=>clearTimeout(n)},[s]),o?e.jsx("div",{className:`auto-alert alert alert-${t} alert-dismissible fade show`,role:"alert",children:a}):null},Se=()=>e.jsx("main",{className:"container mt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"mb-3",children:"ðŸŽ¬ Bem-vindo Ã  VÃ­deo Locadora!"}),e.jsx(te,{message:"SISTEMA INICIALIZADO!",type:"success",duration:5e3}),e.jsx("img",{className:"img-fluid w-50",src:"./src/assets/logo/video-locadora-retro-logo.png",alt:"Bem-vindo Ã  VÃ­deo Locadora!"}),e.jsx("p",{className:"lead",children:"Explore nossa coleÃ§Ã£o de filmes e sÃ©ries."})]})}),De=()=>e.jsx(Se,{}),Le=()=>e.jsxs("main",{className:"main not-found",children:[e.jsx("h1",{children:"404 - PÃ¡gina NÃ£o Encontrada"}),e.jsx("p",{children:"A pÃ¡gina que vocÃª tentou acessar nÃ£o existe ou foi removida."}),e.jsx(S,{to:"/home",className:"back-home",children:"â† Voltar para a pÃ¡gina inicial"})]});await w("atores");console.log("[DB CONTROLLER ATORES]: ",m);let T=m.atoresArray;(!T||T.length===0)&&(console.log("Usando dados locais para atores.js"),T=[{_id:1,nome:"Linda Hamilton"},{_id:2,nome:"Arnold Schwarzenegger"},{_id:3,nome:"Robert Patrick"}]);await w("classes");console.log("[DB CONTROLLER CLASSES]: ",m);let O=m.classesArray;(!O||O.length===0)&&(console.log("Usando dados locais para classes.js"),O=[{_id:1,nome:"lancamento",valor:5,dataDevolucao:"01/10/2025"},{_id:2,nome:"comum",valor:3,dataDevolucao:"02/10/2025"}]);await w("diretores");console.log("[DB CONTROLLER DIRETOR]: ",m);let R=m.diretoresArray;(!R||R.length===0)&&(console.log("Usando dados locais para diretores.js"),R=[{_id:1,nome:"James Cameron"},{_id:2,nome:"William Wisher"}]);await w("titulos");console.log("[DB CONTROLLER TITULOS]: ",m);let P=m.titulosArray;(!P||P.length===0)&&(console.log("Usando dados locais para titulos.js"),P=[{nome:"Terminator 2",diretor:"James Cameron",atores:["Arnold Schwarzenegger","Linda Hamilton","Edward Furlong","Robert Patrick"],sinopse:"O jovem John Connor Ã© a chave para a vitÃ³ria da humanidade sobre a rebeliÃ£o das mÃ¡quinas no futuro. O garoto Ã© alvo de T-1000, um exterminador feito de metal lÃ­quido que pode assumir a forma que desejar e que foi enviado do futuro para matÃ¡-lo. Outro exterminador, o renovado T-800, tambÃ©m Ã© mandado de volta para proteger o menino. Enquanto John e sua mÃ£e, Sarah Connor, fogem com o T-800, o garoto cria um vÃ­nculo afetivo inesperado com o robÃ´.",ano:1991,categoria:"ficÃ§Ã£o cientÃ­fica"},{nome:"Terminator",diretor:"James Cameron",atores:["Michael Biehn","Lance Henriksen","Paul Winfield","Arnold Schwarzenegger","Linda Hamilton"],sinopse:"DisfarÃ§ado de humano, o assassino conhecido como o Exterminador viaja de 2029 a 1984 para matar Sarah Connor. Enviado para proteger Sarah estÃ¡ Kyle Reese, que divulga a chegada do Skynet, um sistema de inteligÃªncia artificial que detonarÃ¡ um holocausto nuclear. Sarah Ã© o alvo porque a Skynet sabe que seu futuro filho comandarÃ¡ a luta contra eles. Com o implacÃ¡vel Exterminador os perseguindo, Sarah e Kyle tentam sobreviver.",ano:1985,categoria:"ficÃ§Ã£o cientÃ­fica"}]);await w("itens");console.log("[DB CONTROLLER ITENS]: ",m);let M=m.itensArray;(!M||M.length===0)&&(console.log("Usando dados locais para titulos.js"),M=[{numSerie:41047854527,titulo:"Terminator 2",data_aquisicao:"30-08-1991",tipo:"DVD"},{numSerie:410478542343,titulo:"Terminator ",data_aquisicao:"25-03-1985",tipo:"DVD"}]);const v=["id","ativo","data_nascimento","nacionalidade","Nacionalidade","classeId","classeId","diretorId","tituloId","atoresIds"],U=[{name:"atores",label:"Atores",description:"Este caso de uso Ã© responsÃ¡vel pelo controle de atores, abrangendo a inclusÃ£o de um novo ator, alteraÃ§Ã£o e exclusÃ£o.",data:N(v,T),databaseSchema:{id:0,nome:"Arnold Schwarzenegger"},backendPayloadMinimalRequired:{nome:"string"}},{name:"classes",label:"Classes",description:"Este caso de uso Ã© responsÃ¡vel pelo controle de classes, abrangendo a inclusÃ£o de uma nova classe, alteraÃ§Ã£o e exclusÃ£o.",data:N(v,O),databaseSchema:{id:0,nome:"string",precoDiariaCentavos:0,dataDevolucao:"2025-11-01"},backendPayloadMinimalRequired:{nome:"string",precoDiariaCentavos:0,dataDevolucao:"2025-11-01"}},{name:"diretores",label:"Diretores",description:"Este caso de uso Ã© responsÃ¡vel pelo controle de diretores, abrangendo a inclusÃ£o de um novo ator, alteraÃ§Ã£o e exclusÃ£o.",data:N(v,R),databaseSchema:{id:0,nome:"string"},backendPayloadMinimalRequired:{nome:"string"}},{name:"itens",label:"Itens",description:"Este caso de uso Ã© responsÃ¡vel pelo controle de itens (fitas ouDVDs), abrangendo a inclusÃ£o, alteraÃ§Ã£o, consulta e exclusÃ£o de itens.",data:N(v,M),databaseSchema:{id:0,numSerie:7415872,dtAquisicao:"30-08-1991",tipoItem:["DVD","fita","Blue Ray"],titulo:["Terminator 2"]},backendPayloadMinimalRequired:{numSerie:"string",dtAquisicao:"2025-11-01",tipoItem:"string",tituloId:0}},{name:"titulos",label:"TÃ­tulos",description:"Este caso de uso Ã© responsÃ¡vel pelo controle de tÃ­tulos, abrangendo ainclusÃ£ode um novo tÃ­tulo, alteraÃ§Ã£o, consulta e exclusÃ£o de tÃ­tulos existentes.",data:N(v,P),databaseSchema:{id:0,nome:"Terminator 2",ano:1991,sinopse:"O jovem John Connor Ã© a chave para a vitÃ³ria da humanidade sobre a rebeliÃ£o das mÃ¡quinas no futuro. O garoto Ã© alvo de T-1000, um exterminador feito de metal lÃ­quido que pode assumir a forma que desejar e que foi enviado do futuro para matÃ¡-lo. Outro exterminador, o renovado T-800, tambÃ©m Ã© mandado de volta para proteger o menino. Enquanto John e sua mÃ£e, Sarah Connor, fogem com o T-800, o garoto cria um vÃ­nculo afetivo inesperado com o robÃ´.",categoria:"FicÃ§Ã£o CientÃ­fica",classeNome:["LanÃ§amento"],diretorNome:["James Cameron"],atoresNomes:["Arnold Schwarzenegger","Linda Hamilton","Edward Furlong","Robert Patrick"]},backendPayloadMinimalRequired:{nome:"string",ano:1900,sinopse:"string",categoria:"string",classeId:0,diretorId:0,atoresIds:[0]}},{name:"clientes/socio",label:"clientes",description:"Este caso de uso Ã© responsÃ¡vel pelo controle de tÃ­tulos, abrangendo ainclusÃ£ode um novo tÃ­tulo, alteraÃ§Ã£o, consulta e exclusÃ£o de tÃ­tulos existentes.",backendPayloadMinimalRequired:{nome:"string",dtNascimento:"2025-11-01",sexo:"string",cpf:"string",endereco:"string",telefone:"string",dependentes:[{nome:"string",dtNascimento:"2025-11-01",sexo:"string"}]}}],se=a=>a?.id??a?._id??null,A=a=>a?.nome??null;function Ie(a){if(!a||typeof a!="string")return"";const t=a.replace(/([a-z])([A-Z])/g,"$1 $2");return t.charAt(0).toUpperCase()+t.slice(1)}function k(a){return Math.floor(Math.random()*a)}function Ce(a){if(Array.isArray(a)){if(a.length>0&&typeof a[0]=="object"&&a[0]!==null)return Object.keys(a[0])}else if(typeof a=="object"&&a!==null)return Array.isArray(a.newPageFields)?a.newPageFields:Array.isArray(a.data)&&a.data.length>0?Object.keys(a.data[0]):Object.keys(a);return console.warn("[extractKeys] Formato inesperado:",a),[]}function N(a,t){return Array.isArray(t)&&typeof t[0]=="string"?t.filter(s=>!a.includes(s)):Array.isArray(t)&&typeof t[0]=="object"?t.map(s=>Object.fromEntries(Object.entries(s).filter(([o])=>!a.includes(o)))):typeof t=="object"&&t!==null?Object.fromEntries(Object.entries(t).filter(([s])=>!a.includes(s))):(console.warn("[filtrarCampos] Tipo inesperado:",t),t)}function $e(a){const t=U.find(s=>s.name.toLowerCase().includes(a.toLowerCase()));return!t||!Array.isArray(t.data)?[]:t.data.map(s=>s.nome||s.titulo||s.name||s.id||"Desconhecido")}function Te(a){return Object.keys(a).filter(t=>!v.includes(t)).map(t=>{const s=a[t];let o="text",r=null;return Array.isArray(s)&&s.every(n=>typeof n=="string")||Array.isArray(s)&&s.every(n=>typeof n=="number")?(o="select",r=s):typeof s=="boolean"?o="checkbox":typeof s=="number"?o="number":t.toLowerCase().includes("senha")?o="password":typeof s=="string"&&/^(\d{4}-\d{2}-\d{2}|\d{2}[\/-]\d{2}[\/-]\d{4})$/.test(s)?o="date":t.toLowerCase().endsWith("id")&&(o="select",r=$e(t)),{name:t,label:Ie(t),type:o,options:r}})}const Oe=({fields:a})=>e.jsx("thead",{className:"table-dark",children:e.jsxs("tr",{children:[a.map(t=>e.jsx("th",{children:t.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase())},t)),e.jsx("th",{children:"AÃ§Ãµes"})]})}),Re=({item:a,onDelete:t})=>{const{moduleName:s}=Y();return e.jsxs(e.Fragment,{children:[e.jsx(S,{to:`/${s}/editar/${se(a)}`,className:"btn btn-sm btn-warning me-2",children:"Editar"}),e.jsx("button",{onClick:()=>t(a),className:"btn btn-sm btn-danger",children:"Excluir"})]})},Pe=({item:a,fields:t,onDelete:s})=>e.jsxs("tr",{children:[t.map(o=>e.jsx("td",{children:a[o]},o)),e.jsx("td",{children:e.jsx(Re,{item:a,onDelete:s})})]}),C=({message:a="Carregando"})=>e.jsxs("div",{className:"loading-overlay",children:[e.jsx("div",{className:"spinner-border text-light",role:"status",style:{width:"4rem",height:"4rem"},children:e.jsx("span",{className:"visually-hidden",children:"Carregando..."})}),e.jsxs("p",{className:"mt-3 text-white",children:[a,"..."]})]});C.propTypes={message:ie.string};const Me=({moduleConfig:a,data:t,fields:s})=>{const[o,r]=l.useState(!1),[n,c]=l.useState(!1),[i,d]=l.useState(null),u=a.label.toLowerCase(),f=a.errorMessages,h=["id","_id"];if(!t||t.length===0){const j=f[k(f.length)];return e.jsx("h2",{children:j})}const g=s||Ce(t),p=N(h,g),x=j=>{d(j),c(!0)},q=async()=>{i&&await re(i),c(!1),d(null)},oe=()=>{c(!1),d(null)},re=async j=>{try{r(!0),await ye(u,se(j))}finally{await a.syncData(),r(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"table table-striped table-bordered table-hover",children:[e.jsx(Oe,{fields:p}),e.jsx("tbody",{children:t.map((j,ne)=>e.jsx(Pe,{item:j,fields:p,onDelete:x},ne))})]}),e.jsx(B,{show:n,title:"ConfirmaÃ§Ã£o de exclusÃ£o",message:`Deseja realmente excluir o item "${A(i)}"?`,onConfirm:q,onCancel:oe}),o&&e.jsx(C,{message:"Processando exclusÃ£o..."})]})},z=({links:a=[]})=>{const t=K();return e.jsx("nav",{className:"submenu mb-3",children:e.jsx("ul",{className:"submenu-list",children:a.map((s,o)=>{const r=t.pathname===s.path;return e.jsx("li",{className:`submenu-item ${r?"active-link":""}`,children:e.jsx(S,{to:s.path,children:s.label})},o)})})})},qe=({moduleConfig:a})=>{const[t,s]=l.useState([]);l.useEffect(()=>{Array.isArray(a.data)?s([...a.data]):s([])},[JSON.stringify(a.data)]);const o=[{path:`/${a.name}`,label:"Listagem"},{path:`/${a.name}/novo`,label:"Novo"}];return e.jsxs("div",{children:[e.jsxs("h1",{children:["Lista de ",a.label]}),e.jsx(z,{links:o}),e.jsx(Me,{data:t,moduleConfig:a},JSON.stringify(t))]})},Fe=({text:a})=>e.jsx("button",{type:"submit",className:"btn btn-primary",children:a}),_e=({field:a,value:t,onChange:s})=>{const{name:o,label:r,type:n,options:c}=a;return e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:o,className:"form-label",children:r}),n==="select"?e.jsxs("select",{id:o,name:o,className:"form-select",value:t||"",onChange:s,required:!0,children:[e.jsx("option",{value:"",children:"Selecione..."}),c.map((i,d)=>e.jsx("option",{value:i,children:i},d))]}):e.jsx("input",{id:o,name:o,type:n,className:"form-control",value:n==="checkbox"?void 0:t||"",checked:n==="checkbox"?t||!1:void 0,onChange:s,required:!0})]})},V=({btnTextContent:a="Salvar",exampleObject:t={},onSubmit:s,initialValues:o={}})=>{const[r,n]=l.useState({}),[c,i]=l.useState(null),d=Te(t);l.useEffect(()=>{!t||typeof t!="object"||Array.isArray(t)?i("Erro: formato invÃ¡lido de campos. Ex: { nome: 'abc', valor: 5 }."):i(null)},[t]),l.useEffect(()=>{n(o)},[o]);const u=h=>{const{name:g,type:p,value:x,checked:q}=h.target;n({...r,[g]:p==="checkbox"?q:x})},f=h=>{h.preventDefault();const g=Object.fromEntries(Object.entries(r).map(([p,x])=>Array.isArray(x)&&x.length===1?[p,x[0]]:[p,x]));s(g)};return c?e.jsx("div",{className:"alert alert-danger",children:c}):e.jsxs("form",{onSubmit:f,className:"p-3 border rounded bg-light",children:[d.map(h=>e.jsx(_e,{field:h,value:r[h.name],onChange:u},h.name)),e.jsx(Fe,{text:a})]})},ke=({moduleConfig:a})=>{const t=a.description||"Nenhuma descriÃ§Ã£o fornecida.",s=a.data?.[0]||a.databaseSchema,[o]=l.useState(s),[r,n]=l.useState(null),[c,i]=l.useState(!1),[d,u]=l.useState(!1),f=p=>{console.log("[NewPage] Dados do form:",p),n(p),i(!0)},h=async()=>{try{u(!0),i(!1),console.log("[NewPage] Criando item:",r),await je(a.name,r),console.log("[NewPage] Item salvo com sucesso!")}finally{await a.syncData(),u(!1)}},g=[{path:`/${a.name}`,label:"Listagem"},{path:`/${a.name}/novo`,label:"Novo"}];return e.jsxs("div",{children:[e.jsxs("h2",{children:["Inserir novos ",a.label]}),e.jsx(z,{links:g}),e.jsx("p",{children:t}),e.jsx(V,{btnTextContent:`Inserir ${a.label}`,exampleObject:s,onSubmit:f,initialValues:o}),e.jsx(B,{show:c,title:"ConfirmaÃ§Ã£o",message:`Deseja realmente inserir ${A(r)}?`,onConfirm:h,onCancel:()=>i(!1)}),d&&e.jsx(C,{message:`Criando ${a.name}`})]})},Be=(a,t)=>{const s=Number(t),o=a.find(r=>r.id===s);return o?console.log("Item encontrado:",o):console.warn(`Item com ID ${t} nÃ£o encontrado.`),o},Ue=({moduleConfig:a,id:t})=>{const s=Be(a.data,t),[o]=l.useState(s||{}),[r,n]=l.useState(!1),[c,i]=l.useState(null),[d,u]=l.useState(!1);if(!s)return e.jsxs("div",{children:["Item com ID ",t," nÃ£o encontrado."]});const f=p=>{console.log("[EditPage] Dados do form:",p),i(p),u(!0)},h=async()=>{try{n(!0),u(!1),await be(a.name,t,c),console.log("[EditPage] Item atualizado com sucesso!")}finally{await a.syncData(),n(!1)}},g=[{path:`/${a.name}`,label:"Listagem"},{path:`/${a.name}/novo`,label:"Novo"},{path:`/${a.name}/editar/${t}`,label:`Uau! Editando ${A(s)}! `}];return e.jsxs("div",{className:"container flex flex-column align-items-center",children:[e.jsxs("h2",{children:["Editar ",a.label]}),e.jsx(z,{links:g}),e.jsx(V,{btnTextContent:"Editar",exampleObject:s,onSubmit:f,initialValues:o}),e.jsx(B,{show:d,title:"ConfirmaÃ§Ã£o",message:`Deseja realmente editar ${A(s)} para ${A(c)}?`,onConfirm:h,onCancel:()=>u(!1)}),r&&e.jsx(C,{message:`Editando ${a.name}`})]})},ze=a=>U.find(t=>t.name===a),y=["Ops! Parece que aqui nÃ£o tem nadaâ€¦ nem poeira! ðŸ§¹","Nada para mostrarâ€¦ O fantasma dos dados levou tudo! ðŸ‘»","Tabela vazia! Hora de adicionar algum conteÃºdo, antes que ela fique triste ðŸ˜¢","Hmmâ€¦ nada aqui ainda. Talvez os dados estejam de fÃ©rias ðŸŒ´","Zero dados encontrados. Mas hey, pelo menos o cafÃ© estÃ¡ garantido â˜•","AtenÃ§Ã£o! Este espaÃ§o estÃ¡ reservado para dados incrÃ­veis que ainda nÃ£o chegaram ðŸš€"],F=({children:a})=>{const{moduleName:t,id:s}=Y(),o=ze(t),[r,n]=l.useState(o?.data||[]),c=async()=>{try{await ae(t,n)}catch(i){E(`[ModuleWrapper] Erro ao sincronizar ${t}: ${i}`,"danger"),console.error(`[ModuleWrapper] Erro ao sincronizar ${t}:`,i)}};l.useEffect(()=>{c();const i=setInterval(c,1e3*35);return()=>clearInterval(i)},[t]);try{if(!o){const i=y[k(y.length)];return e.jsxs("h2",{children:[i,' â€” mÃ³dulo "',t,'" nÃ£o encontrado.']})}return console.log("ðŸ” ModuleWrapper sincronizado:",t),Z.cloneElement(a,{moduleConfig:{...o,data:r,syncData:c,errorMessages:y},setData:n,id:s})}catch(i){console.error(`[ModuleWrapper] Erro no render de ${t}:`,i),setRenderError(i);const d=y[k(y.length)];return e.jsxs("h2",{children:[d," â€” algo deu errado ao carregar o mÃ³dulo."]})}};class _ extends Z.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("[ErrorBoundary] Erro capturado:",t,s)}render(){if(this.state.hasError){const t=y[Math.floor(Math.random()*y.length)];return e.jsxs("div",{className:"alert alert-danger p-4",children:[e.jsxs("h2",{children:[t," â€” algo deu errado ao carregar este mÃ³dulo."]}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",marginTop:"1rem"},children:this.state.error?.toString()})]})}return this.props.children}}const H=({moduleConfig:a})=>{const{userLoged:t,setUserLoged:s,setUser:o}=l.useContext(I),[r,n]=l.useState({}),c=W(),i={usuario:"admin",senha:null},d=async u=>{try{if(!u)throw"UsuÃ¡rio ou senha invÃ¡lidos!";console.log("Login efetuado:",u),s(!0),o(u.usuario),c("/home")}catch(f){s(!1),o(null),console.error("Erro ao fazer login:",f),alert("UsuÃ¡rio ou senha invÃ¡lidos!")}};return t?c("/home"):e.jsxs("div",{className:"container flex",children:[e.jsx("h1",{children:"Login"}),e.jsx(V,{btnTextContent:"Entrar",exampleObject:i,onSubmit:d,initialValues:i})]})},$=({children:a})=>{const{userLoged:t}=l.useContext(I);return t?a:e.jsx(le,{to:"/",replace:!0})},Ve=()=>e.jsxs(ce,{children:[e.jsx(b,{path:"/",element:e.jsx(H,{})}),e.jsx(b,{path:"/login",element:e.jsx(H,{})}),e.jsx(b,{path:"/home",element:e.jsx($,{children:e.jsx(De,{})})}),e.jsx(b,{path:"/:moduleName",element:e.jsx($,{children:e.jsx(_,{children:e.jsx(F,{children:e.jsx(qe,{})})})})}),e.jsx(b,{path:"/:moduleName/novo",element:e.jsx($,{children:e.jsx(_,{children:e.jsx(F,{children:e.jsx(ke,{})})})})}),e.jsx(b,{path:"/:moduleName/editar/:id",element:e.jsx($,{children:e.jsx(_,{children:e.jsx(F,{children:e.jsx(Ue,{})})})})}),e.jsx(b,{path:"*",element:e.jsx(Le,{})})]}),He=()=>{const{loaded:a}=l.useContext(I),t=[{path:"/home",label:"InÃ­cio"},...U.flatMap(({name:s,label:o})=>[{path:`/${s}`,label:o}])];return e.jsxs(e.Fragment,{children:[e.jsx(Ae,{}),e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-3 col-lg-2",children:e.jsx(Ee,{links:t})}),e.jsx("div",{className:"col-12 col-md-9 col-lg-10",children:e.jsx(Ve,{})})]})}),!a&&e.jsx(C,{})]})},Je=()=>`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,We=()=>{const[a,t]=l.useState([]),s=l.useCallback((o,r="info")=>{const n=Je(),i={success:5e3,info:6e3,warning:7e3,danger:8e3}[r]||5e3;t(d=>[...d,{id:n,message:o,type:r,duration:i}]),setTimeout(()=>{t(d=>d.filter(u=>u.id!==n))},i)},[]);return window.addAlert=s,e.jsx("div",{className:"alert-container",children:a.map(o=>e.jsx(te,{message:o.message,type:o.type,duration:o.duration},o.id))})},Ke=()=>e.jsx(we,{children:e.jsxs(de,{children:[e.jsx(He,{}),e.jsx(We,{})]})});ue.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(Ke,{})}));
