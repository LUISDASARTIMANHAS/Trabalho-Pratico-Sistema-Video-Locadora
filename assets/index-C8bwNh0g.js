import{a as H,r as c,j as e,u as W,L as D,b as K,c as Y,R as Z,N as ie,P as le,d as ce,e as j,B as de,f as me}from"./vendor-CO-sNSAs.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const ue=""+new URL("video-locadora-retro-logo-M4WB8AE4.png",import.meta.url).href,he={VITE_BACKEND_DOMAIN:"147.185.221.212",VITE_BACKEND_PORT:"48815",VITE_PRODUCTION_URL:"https://my-json-server.typicode.com/typicode/demo/"},{VITE_BACKEND_PORT:pe,VITE_BACKEND_DOMAIN:fe,VITE_PRODUCTION_URL:ge}=he;async function xe(a){try{await I.post("/telemetria",{mensagem:"Erro ao comunicar com API",erro:a,timestamp:new Date().toISOString()})}catch(s){console.error("Erro ao enviar telemetria:",s.message)}}async function L(a,...s){try{const t=await a(...s);if(!t)throw new Error(`Resposta invÃ¡lida da API: ${t}`);if(t.status===204)return null;if(t.data===void 0||t.data===null||typeof t.data!="object")throw new Error(`Resposta invÃ¡lida da API: ${JSON.stringify(t.data)}`);const o=t.data,r=o.content??o.data??o.result??o??null;if(r===null)throw new Error("Nenhum campo de conteÃºdo encontrado em response.data");return r}catch(t){const o=t.response?.data?.message||t.message||"Erro desconhecido",n=(t.response?.data?.errors||[]).map(l=>`${l.field}: ${l.message}`).join("; "),i=n?`${o} - Detalhes: ${n}`:o;throw await xe(t.response?.data||t.toString()),E(`[handleRequest] âŒ ${i}`,"danger"),i}}async function G(){return L(ve.get,"posts",{headers:{Accept:"application/json"}})}async function Q(a){return L(I.get,a,{headers:{Accept:"application/json"}})}async function je(a,s){return L(I.post,a,s)}async function be(a,s,t){return L(I.put,`${a}/${s}`,t)}async function ye(a,s){return L(I.delete,`${a}/${s}`)}function E(a,s="info"){typeof window.addAlert=="function"?window.addAlert(a,s):console.warn(`[ALERTA] ${s.toUpperCase()}: ${a}`)}function X(a){return a&&a=="local"?`http://${fe}:${pe}/api`:ge}const ee=["atores","classes","diretores","titulos","itens"],I=H.create({baseURL:X("local"),timeout:1e4,headers:{Authorization:`Bearer ${new Date}`,"Content-Type":"application/json"}}),ve=H.create({baseURL:X("production"),timeout:1e4,headers:{Authorization:`Bearer ${new Date}`,"Content-Type":"application/json"}});let u={};async function w(a){const s=`${a}Array`;try{E(`ðŸ”„ Buscando ${a} da API...`,"info");const t=await Q(a);return u[s]=t,console.log(`[API] Dados carregados de ${a}:`,t),t}catch{console.warn(`[LOCAL] Falha ao carregar ${a}, usando demo.`);const o=await G();return u[s]=o,E(`âš ï¸ Usando dados locais para ${a}`,"warning"),o}}async function Ne(){for(const a of ee)await w(a)}async function ae(a,s){if(!a){for(const o of ee)await ae(o);return}const t=`${a}Array`;console.log(`[SYNC] Sincronizando ${a}...`);try{const o=await Q(a);u[t]=o,typeof s=="function"&&s(o),console.log(`[SYNC] ${a} sincronizado:`,o)}catch{console.warn(`[SYNC] Falha ao sincronizar ${a}. Usando demo.`);const r=await G();u[t]=r,typeof s=="function"&&s(r),E(`âŒ Falha ao sincronizar ${a}`,"danger")}}const $=c.createContext(),we=({children:a})=>{const[s,t]=c.useState(!1),[o,r]=c.useState(!1),[n,i]=c.useState(null);return c.useEffect(()=>{(async()=>{try{await Ne()}catch(l){window.addAlert(`âŒ Falha ao sincronizar dados! ${l}`,"danger")}finally{t(!0)}})()},[]),e.jsx($.Provider,{value:{loaded:s,userLoged:o,setUserLoged:r,user:n,setUser:i},children:a})},Ae=()=>{const{userLoged:a,setUserLoged:s,user:t}=c.useContext($),o=W(),r=()=>{a&&s(!1),o("/")};return e.jsxs("header",{className:"navbar navbar-dark bg-dark px-3 justify-content-between",children:[e.jsxs(D,{to:"/",className:"navbar-brand d-flex align-items-center",children:[e.jsx("img",{src:ue,alt:"VideoLocadora",style:{height:"40px",marginRight:"10px"}}),e.jsx("span",{children:"VideoLocadora"})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[a&&t&&e.jsxs("span",{className:"text fw-bold fst-italic fs-5 me-3",children:["Bem-vindo, @",t]}),e.jsx("button",{className:"btn btn-warning",onClick:r,children:a?"Sair":"Entrar"})]})]})},Se=({links:a=[]})=>{const s=K();return e.jsxs("aside",{className:"bg-light border rounded p-3",children:[e.jsx("h4",{className:"mb-3",children:"Menu"}),e.jsx("nav",{children:e.jsx("ul",{className:"list-group",children:a.map((t,o)=>{const r=s.pathname===t.path;return e.jsx("li",{className:`list-group-item ${r?"active-link":""}`,children:e.jsx(D,{to:t.path,children:t.label})},o)})})})]})},B=({show:a,title:s,message:t,onConfirm:o,onCancel:r})=>{if(!a)return null;const n=()=>{o&&o()},i=()=>{r&&r()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-backdrop-fade"}),e.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:s}),e.jsx("button",{type:"button",className:"btn-close",onClick:i})]}),e.jsx("div",{className:"modal-body",children:e.jsx("p",{children:t})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:i,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary",onClick:n,children:"Ok"})]})]})})})]})},se=({message:a,type:s="success",duration:t=3e3})=>{const[o,r]=c.useState(!0);return c.useEffect(()=>{const n=setTimeout(()=>r(!1),t);return()=>clearTimeout(n)},[t]),o?e.jsx("div",{className:`auto-alert alert alert-${s} alert-dismissible fade show`,role:"alert",children:a}):null},Ee=()=>e.jsx("main",{className:"container mt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"mb-3",children:"ðŸŽ¬ Bem-vindo Ã  VÃ­deo Locadora!"}),e.jsx(se,{message:"SISTEMA INICIALIZADO!",type:"success",duration:5e3}),e.jsx("img",{className:"img-fluid w-50",src:"./src/assets/logo/video-locadora-retro-logo.png",alt:"Bem-vindo Ã  VÃ­deo Locadora!"}),e.jsx("p",{className:"lead",children:"Explore nossa coleÃ§Ã£o de filmes e sÃ©ries."})]})}),De=()=>e.jsx(Ee,{});await w("atores");console.log("[DB CONTROLLER ATORES]: ",u);let O=u.atoresArray;(!O||O.length===0)&&(console.log("Usando dados locais para atores.js"),O=[{_id:1,nome:"Linda Hamilton"},{_id:2,nome:"Arnold Schwarzenegger"},{_id:3,nome:"Robert Patrick"}]);await w("classes");console.log("[DB CONTROLLER CLASSES]: ",u);let P=u.classesArray;(!P||P.length===0)&&(console.log("Usando dados locais para classes.js"),P=[{_id:1,nome:"lancamento",valor:5,dataDevolucao:"01/10/2025"},{_id:2,nome:"comum",valor:3,dataDevolucao:"02/10/2025"}]);await w("diretores");console.log("[DB CONTROLLER DIRETOR]: ",u);let F=u.diretoresArray;(!F||F.length===0)&&(console.log("Usando dados locais para diretores.js"),F=[{_id:1,nome:"James Cameron"},{_id:2,nome:"William Wisher"}]);await w("titulos");console.log("[DB CONTROLLER TITULOS]: ",u);let k=u.titulosArray;(!k||k.length===0)&&(console.log("Usando dados locais para titulos.js"),k=[{nome:"Terminator 2",diretor:"James Cameron",atores:["Arnold Schwarzenegger","Linda Hamilton","Edward Furlong","Robert Patrick"],sinopse:"O jovem John Connor Ã© a chave para a vitÃ³ria da humanidade sobre a rebeliÃ£o das mÃ¡quinas no futuro. O garoto Ã© alvo de T-1000, um exterminador feito de metal lÃ­quido que pode assumir a forma que desejar e que foi enviado do futuro para matÃ¡-lo. Outro exterminador, o renovado T-800, tambÃ©m Ã© mandado de volta para proteger o menino. Enquanto John e sua mÃ£e, Sarah Connor, fogem com o T-800, o garoto cria um vÃ­nculo afetivo inesperado com o robÃ´.",ano:1991,categoria:"ficÃ§Ã£o cientÃ­fica"},{nome:"Terminator",diretor:"James Cameron",atores:["Michael Biehn","Lance Henriksen","Paul Winfield","Arnold Schwarzenegger","Linda Hamilton"],sinopse:"DisfarÃ§ado de humano, o assassino conhecido como o Exterminador viaja de 2029 a 1984 para matar Sarah Connor. Enviado para proteger Sarah estÃ¡ Kyle Reese, que divulga a chegada do Skynet, um sistema de inteligÃªncia artificial que detonarÃ¡ um holocausto nuclear. Sarah Ã© o alvo porque a Skynet sabe que seu futuro filho comandarÃ¡ a luta contra eles. Com o implacÃ¡vel Exterminador os perseguindo, Sarah e Kyle tentam sobreviver.",ano:1985,categoria:"ficÃ§Ã£o cientÃ­fica"}]);await w("itens");console.log("[DB CONTROLLER ITENS]: ",u);let q=u.itensArray;(!q||q.length===0)&&(console.log("Usando dados locais para titulos.js"),q=[{numSerie:41047854527,titulo:"Terminator 2",data_aquisicao:"30-08-1991",tipo:"DVD"},{numSerie:410478542343,titulo:"Terminator ",data_aquisicao:"25-03-1985",tipo:"DVD"}]);const v=["id","ativo","data_nascimento","nacionalidade","Nacionalidade","classeId","classeId","diretorId","tituloId","atoresIds"],U=[{name:"atores",label:"Atores",description:"Este caso de uso Ã© responsÃ¡vel pelo controle de atores, abrangendo a inclusÃ£o de um novo ator, alteraÃ§Ã£o e exclusÃ£o.",data:N(v,O),databaseSchema:{id:0,nome:"Arnold Schwarzenegger"},backendPayloadMinimalRequired:{nome:"string"}},{name:"classes",label:"Classes",description:"Este caso de uso Ã© responsÃ¡vel pelo controle de classes, abrangendo a inclusÃ£o de uma nova classe, alteraÃ§Ã£o e exclusÃ£o.",data:N(v,P),databaseSchema:{id:0,nome:"string",precoDiariaCentavos:0,dataDevolucao:"2025-11-01"},backendPayloadMinimalRequired:{nome:"string",precoDiariaCentavos:0,dataDevolucao:"2025-11-01"}},{name:"diretores",label:"Diretores",description:"Este caso de uso Ã© responsÃ¡vel pelo controle de diretores, abrangendo a inclusÃ£o de um novo ator, alteraÃ§Ã£o e exclusÃ£o.",data:N(v,F),databaseSchema:{id:0,nome:"string"},backendPayloadMinimalRequired:{nome:"string"}},{name:"itens",label:"Itens",description:"Este caso de uso Ã© responsÃ¡vel pelo controle de itens (fitas ouDVDs), abrangendo a inclusÃ£o, alteraÃ§Ã£o, consulta e exclusÃ£o de itens.",data:N(v,q),databaseSchema:{id:0,numSerie:7415872,dtAquisicao:"30-08-1991",tipoItem:["DVD","fita","Blue Ray"],titulo:["Terminator 2"]},backendPayloadMinimalRequired:{numSerie:"string",dtAquisicao:"2025-11-01",tipoItem:"string",tituloId:0}},{name:"titulos",label:"TÃ­tulos",description:"Este caso de uso Ã© responsÃ¡vel pelo controle de tÃ­tulos, abrangendo ainclusÃ£ode um novo tÃ­tulo, alteraÃ§Ã£o, consulta e exclusÃ£o de tÃ­tulos existentes.",data:N(v,k),databaseSchema:{id:0,nome:"Terminator 2",ano:1991,sinopse:"O jovem John Connor Ã© a chave para a vitÃ³ria da humanidade sobre a rebeliÃ£o das mÃ¡quinas no futuro. O garoto Ã© alvo de T-1000, um exterminador feito de metal lÃ­quido que pode assumir a forma que desejar e que foi enviado do futuro para matÃ¡-lo. Outro exterminador, o renovado T-800, tambÃ©m Ã© mandado de volta para proteger o menino. Enquanto John e sua mÃ£e, Sarah Connor, fogem com o T-800, o garoto cria um vÃ­nculo afetivo inesperado com o robÃ´.",categoria:"FicÃ§Ã£o CientÃ­fica",classeNome:["LanÃ§amento"],diretorNome:["James Cameron"],atoresNomes:["Arnold Schwarzenegger","Linda Hamilton","Edward Furlong","Robert Patrick"]},backendPayloadMinimalRequired:{nome:"string",ano:1900,sinopse:"string",categoria:"string",classeId:0,diretorId:0,atoresIds:[0]}},{name:"clientes",label:"clientes",description:"Este caso de uso Ã© responsÃ¡vel pelo controle de tÃ­tulos, abrangendo ainclusÃ£ode um novo tÃ­tulo, alteraÃ§Ã£o, consulta e exclusÃ£o de tÃ­tulos existentes.",databaseSchema:{nome:"Asdrubal",dtNascimento:"1924-11-01",sexo:"masculino",cpf:"192.168.224-01",endereco:"R. Central - SÃ£o JosÃ©",telefone:"27 12345-6789",dependentes:["Filho1"]},backendPayloadMinimalRequired:{nome:"string",dtNascimento:"2025-11-01",sexo:"string",cpf:"string",endereco:"string",telefone:"string",dependentes:[{nome:"string",dtNascimento:"2025-11-01",sexo:"string"}]}},{name:"locacoes",label:"locaÃ§Ãµes",description:"Este caso de uso Ã© responsÃ¡vel pelo controle de tÃ­tulos, abrangendo ainclusÃ£ode um novo tÃ­tulo, alteraÃ§Ã£o, consulta e exclusÃ£o de tÃ­tulos existentes.",databaseSchema:{nome:"Asdrubal",dtNascimento:"1924-11-01",sexo:"masculino",cpf:"192.168.224-01",endereco:"R. Central - SÃ£o JosÃ©",telefone:"27 12345-6789",dependentes:["Filho1"]},backendPayloadMinimalRequired:{nome:"string",dtNascimento:"2025-11-01",sexo:"string",cpf:"string",endereco:"string",telefone:"string",dependentes:[{nome:"string",dtNascimento:"2025-11-01",sexo:"string"}]}}],te=a=>a?.id??a?._id??null,S=a=>a?.nome??null;function Le(a){if(!a||typeof a!="string")return"";const s=a.replace(/([a-z])([A-Z])/g,"$1 $2");return s.charAt(0).toUpperCase()+s.slice(1)}function _(a){return Math.floor(Math.random()*a)}function Ie(a){if(Array.isArray(a)){if(a.length>0&&typeof a[0]=="object"&&a[0]!==null)return Object.keys(a[0])}else if(typeof a=="object"&&a!==null)return Array.isArray(a.newPageFields)?a.newPageFields:Array.isArray(a.data)&&a.data.length>0?Object.keys(a.data[0]):Object.keys(a);return console.warn("[extractKeys] Formato inesperado:",a),[]}function N(a,s){return Array.isArray(s)&&typeof s[0]=="string"?s.filter(t=>!a.includes(t)):Array.isArray(s)&&typeof s[0]=="object"?s.map(t=>Object.fromEntries(Object.entries(t).filter(([o])=>!a.includes(o)))):typeof s=="object"&&s!==null?Object.fromEntries(Object.entries(s).filter(([t])=>!a.includes(t))):(console.warn("[filtrarCampos] Tipo inesperado:",s),s)}function $e(a){const s=U.find(t=>t.name.toLowerCase().includes(a.toLowerCase()));return!s||!Array.isArray(s.data)?[]:s.data.map(t=>t.nome||t.titulo||t.name||t.id||"Desconhecido")}function Ce(a){return Object.keys(a).filter(s=>!v.includes(s)).map(s=>{const t=a[s];let o="text",r=null;return Array.isArray(t)&&t.every(n=>typeof n=="string")||Array.isArray(t)&&t.every(n=>typeof n=="number")?(o="select",r=t):typeof t=="boolean"?o="checkbox":typeof t=="number"?o="number":s.toLowerCase().includes("senha")?o="password":typeof t=="string"&&/^(\d{4}-\d{2}-\d{2}|\d{2}[\/-]\d{2}[\/-]\d{4})$/.test(t)?o="date":s.toLowerCase().endsWith("id")&&(o="select",r=$e(s)),{name:s,label:Le(s),type:o,options:r}})}const Re=a=>U.find(s=>s.name===a),y=["Ops! Parece que aqui nÃ£o tem nadaâ€¦ nem poeira! ðŸ§¹","Nada para mostrarâ€¦ O fantasma dos dados levou tudo! ðŸ‘»","Tabela vazia! Hora de adicionar algum conteÃºdo, antes que ela fique triste ðŸ˜¢","Hmmâ€¦ nada aqui ainda. Talvez os dados estejam de fÃ©rias ðŸŒ´","Zero dados encontrados. Mas hey, pelo menos o cafÃ© estÃ¡ garantido â˜•","AtenÃ§Ã£o! Este espaÃ§o estÃ¡ reservado para dados incrÃ­veis que ainda nÃ£o chegaram ðŸš€"],R=({children:a})=>{const{moduleName:s,id:t}=Y(),o=Re(s),[r,n]=c.useState(o?.data||[]),i=async()=>{try{await ae(s,n)}catch(l){E(`[ModuleWrapper] Erro ao sincronizar ${s}: ${l}`,"danger"),console.error(`[ModuleWrapper] Erro ao sincronizar ${s}:`,l)}};c.useEffect(()=>{i();const l=setInterval(i,1e3*35);return()=>clearInterval(l)},[s]);try{if(!o){const l=y[_(y.length)];return e.jsxs("h2",{children:[l,' â€” mÃ³dulo "',s,'" nÃ£o encontrado.']})}return console.log("ðŸ” ModuleWrapper sincronizado:",s),Z.cloneElement(a,{moduleConfig:{...o,data:r,syncData:i,errorMessages:y},setData:n,id:t})}catch(l){console.error(`[ModuleWrapper] Erro no render de ${s}:`,l),setRenderError(l);const d=y[_(y.length)];return e.jsxs("h2",{children:[d," â€” algo deu errado ao carregar o mÃ³dulo."]})}};class T extends Z.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,t){console.error("[ErrorBoundary] Erro capturado:",s,t)}render(){if(this.state.hasError){const s=y[Math.floor(Math.random()*y.length)];return e.jsxs("div",{className:"alert alert-danger p-4",children:[e.jsxs("h2",{children:[s," â€” algo deu errado ao carregar este mÃ³dulo."]}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",marginTop:"1rem"},children:this.state.error?.toString()})]})}return this.props.children}}const A=({children:a})=>{const{userLoged:s}=c.useContext($);return s?a:e.jsx(ie,{to:"/",replace:!0})},Te=()=>e.jsxs("main",{className:"main not-found",children:[e.jsx("h1",{children:"404 - PÃ¡gina NÃ£o Encontrada"}),e.jsx("p",{children:"A pÃ¡gina que vocÃª tentou acessar nÃ£o existe ou foi removida."}),e.jsx(D,{to:"/home",className:"back-home",children:"â† Voltar para a pÃ¡gina inicial"})]}),Oe=({fields:a})=>e.jsx("thead",{className:"table-dark",children:e.jsxs("tr",{children:[a.map(s=>e.jsx("th",{children:s.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())},s)),e.jsx("th",{children:"AÃ§Ãµes"})]})}),Pe=({item:a,onDelete:s})=>{const{moduleName:t}=Y();return e.jsxs(e.Fragment,{children:[e.jsx(D,{to:`/${t}/editar/${te(a)}`,className:"btn btn-sm btn-warning me-2",children:"Editar"}),e.jsx("button",{onClick:()=>s(a),className:"btn btn-sm btn-danger",children:"Excluir"})]})},Fe=({item:a,fields:s,onDelete:t})=>e.jsxs("tr",{children:[s.map(o=>e.jsx("td",{children:a[o]},o)),e.jsx("td",{children:e.jsx(Pe,{item:a,onDelete:t})})]}),C=({message:a="Carregando"})=>e.jsxs("div",{className:"loading-overlay",children:[e.jsx("div",{className:"spinner-border text-light",role:"status",style:{width:"4rem",height:"4rem"},children:e.jsx("span",{className:"visually-hidden",children:"Carregando..."})}),e.jsxs("p",{className:"mt-3 text-white",children:[a,"..."]})]});C.propTypes={message:le.string};const ke=({moduleConfig:a,data:s,fields:t})=>{const[o,r]=c.useState(!1),[n,i]=c.useState(!1),[l,d]=c.useState(null),m=a.label.toLowerCase(),f=a.errorMessages,h=["id","_id"];if(!s||s.length===0){const b=f[_(f.length)];return e.jsx("h2",{children:b})}const g=t||Ie(s),p=N(h,g),x=b=>{d(b),i(!0)},M=async()=>{l&&await re(l),i(!1),d(null)},oe=()=>{i(!1),d(null)},re=async b=>{try{r(!0),await ye(m,te(b))}finally{await a.syncData(),r(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"table table-striped table-bordered table-hover",children:[e.jsx(Oe,{fields:p}),e.jsx("tbody",{children:s.map((b,ne)=>e.jsx(Fe,{item:b,fields:p,onDelete:x},ne))})]}),e.jsx(B,{show:n,title:"ConfirmaÃ§Ã£o de exclusÃ£o",message:`Deseja realmente excluir o item "${S(l)}"?`,onConfirm:M,onCancel:oe}),o&&e.jsx(C,{message:"Processando exclusÃ£o..."})]})},z=({links:a=[]})=>{const s=K();return e.jsx("nav",{className:"submenu mb-3",children:e.jsx("ul",{className:"submenu-list",children:a.map((t,o)=>{const r=s.pathname===t.path;return e.jsx("li",{className:`submenu-item ${r?"active-link":""}`,children:e.jsx(D,{to:t.path,children:t.label})},o)})})})},qe=({moduleConfig:a})=>{const[s,t]=c.useState([]);c.useEffect(()=>{Array.isArray(a.data)?t([...a.data]):t([])},[JSON.stringify(a.data)]);const o=[{path:`/${a.name}`,label:"Listagem"},{path:`/${a.name}/novo`,label:"Novo"}];return e.jsxs("div",{children:[e.jsxs("h1",{children:["Lista de ",a.label]}),e.jsx(z,{links:o}),e.jsx(ke,{data:s,moduleConfig:a},JSON.stringify(s))]})},Me=({name:a,label:s,type:t="text",value:o,onChange:r,required:n})=>e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:a,className:"form-label",children:s}),e.jsx("input",{id:a,name:a,type:t,className:"form-control",value:t==="checkbox"?void 0:o||"",checked:t==="checkbox"?o||!1:void 0,onChange:r,required:n})]}),_e=({name:a,label:s,options:t=[],value:o,onChange:r,required:n})=>e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:a,className:"form-label",children:s}),e.jsxs("select",{id:a,name:a,className:"form-select",value:o||"",onChange:r,required:n,children:[e.jsx("option",{value:"",children:"Selecione..."}),t.map((i,l)=>e.jsx("option",{value:i,children:i},l))]})]}),Be=({name:a,label:s,checked:t,onChange:o,required:r})=>e.jsxs("div",{className:"form-check mb-3",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:a,name:a,checked:t||!1,onChange:o,required:r}),e.jsx("label",{className:"form-check-label",htmlFor:a,children:s})]}),Ue=({name:a,label:s,options:t=[],value:o,onChange:r,required:n})=>e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label d-block",children:s}),t.map((i,l)=>e.jsxs("div",{className:"form-check form-check-inline",children:[e.jsx("input",{className:"form-check-input",type:"radio",id:`${a}-${i}`,name:a,value:i,checked:o===i,onChange:r,required:n}),e.jsx("label",{className:"form-check-label",htmlFor:`${a}-${i}`,children:i})]},l))]}),ze=({field:a,value:s,onChange:t})=>{const{name:o,label:r,type:n,options:i,required:l=!0}=a;switch(n){case"select":return e.jsx(_e,{name:o,label:r,options:i,value:s,onChange:t,required:l});case"radio":return e.jsx(Ue,{name:o,label:r,options:i,value:s,onChange:t,required:l});case"checkbox":return e.jsx(Be,{name:o,label:r,checked:s,onChange:t,required:l});default:return e.jsx(Me,{name:o,label:r,type:n,value:s,onChange:t,required:l})}},Ve=({text:a})=>e.jsx("button",{type:"submit",className:"btn btn-primary",children:a}),V=({btnTextContent:a="Salvar",exampleObject:s={},onSubmit:t,initialValues:o={}})=>{const[r,n]=c.useState({}),[i,l]=c.useState(null),d=Ce(s);c.useEffect(()=>{!s||typeof s!="object"||Array.isArray(s)?l("Erro: formato invÃ¡lido de campos. Ex: { nome: 'abc', valor: 5 }."):l(null)},[s]),c.useEffect(()=>{n(o)},[o]);const m=h=>{const{name:g,type:p,value:x,checked:M}=h.target;n({...r,[g]:p==="checkbox"?M:x})},f=h=>{h.preventDefault();const g=Object.fromEntries(Object.entries(r).map(([p,x])=>Array.isArray(x)&&x.length===1?[p,x[0]]:[p,x]));t(g)};return i?e.jsx("div",{className:"alert alert-danger",children:i}):e.jsxs("form",{onSubmit:f,className:"p-3 border rounded bg-light",children:[d.map(h=>e.jsx(ze,{field:h,value:r[h.name],onChange:m},h.name)),e.jsx(Ve,{text:a})]})},Je=(a,s)=>{const t=Number(s),o=a.find(r=>r.id===t);return o?console.log("Item encontrado:",o):console.warn(`Item com ID ${s} nÃ£o encontrado.`),o},He=({moduleConfig:a,id:s})=>{const t=Je(a.data,s),[o]=c.useState(t||{}),[r,n]=c.useState(!1),[i,l]=c.useState(null),[d,m]=c.useState(!1);if(!t)return e.jsxs("div",{children:["Item com ID ",s," nÃ£o encontrado."]});const f=p=>{console.log("[EditPage] Dados do form:",p),l(p),m(!0)},h=async()=>{try{n(!0),m(!1),await be(a.name,s,i),console.log("[EditPage] Item atualizado com sucesso!")}finally{await a.syncData(),n(!1)}},g=[{path:`/${a.name}`,label:"Listagem"},{path:`/${a.name}/novo`,label:"Novo"},{path:`/${a.name}/editar/${s}`,label:`Uau! Editando ${S(t)}! `}];return e.jsxs("div",{className:"container flex flex-column align-items-center",children:[e.jsxs("h2",{children:["Editar ",a.label]}),e.jsx(z,{links:g}),e.jsx(V,{btnTextContent:"Editar",exampleObject:t,onSubmit:f,initialValues:o}),e.jsx(B,{show:d,title:"ConfirmaÃ§Ã£o",message:`Deseja realmente editar ${S(t)} para ${S(i)}?`,onConfirm:h,onCancel:()=>m(!1)}),r&&e.jsx(C,{message:`Editando ${a.name}`})]})},We=({moduleConfig:a})=>{const s=a.description||"Nenhuma descriÃ§Ã£o fornecida.",t=a.data?.[0]||a.databaseSchema,[o]=c.useState(t),[r,n]=c.useState(null),[i,l]=c.useState(!1),[d,m]=c.useState(!1),f=p=>{console.log("[NewPage] Dados do form:",p),n(p),l(!0)},h=async()=>{try{m(!0),l(!1),console.log("[NewPage] Criando item:",r),await je(a.name,r),console.log("[NewPage] Item salvo com sucesso!")}finally{await a.syncData(),m(!1)}},g=[{path:`/${a.name}`,label:"Listagem"},{path:`/${a.name}/novo`,label:"Novo"}];return e.jsxs("div",{children:[e.jsxs("h2",{children:["Inserir novos ",a.label]}),e.jsx(z,{links:g}),e.jsx("p",{children:s}),e.jsx(V,{btnTextContent:`Inserir ${a.label}`,exampleObject:t,onSubmit:f,initialValues:o}),e.jsx(B,{show:i,title:"ConfirmaÃ§Ã£o",message:`Deseja realmente inserir ${S(r)}?`,onConfirm:h,onCancel:()=>l(!1)}),d&&e.jsx(C,{message:`Criando ${a.name}`})]})},J=({moduleConfig:a})=>{const{userLoged:s,setUserLoged:t,setUser:o}=c.useContext($),[r,n]=c.useState({}),i=W(),l={usuario:"admin",senha:null},d=async m=>{try{if(!m)throw"UsuÃ¡rio ou senha invÃ¡lidos!";console.log("Login efetuado:",m),t(!0),o(m.usuario),i("/home")}catch(f){t(!1),o(null),console.error("Erro ao fazer login:",f),alert("UsuÃ¡rio ou senha invÃ¡lidos!")}};return s?i("/home"):e.jsxs("div",{className:"container flex",children:[e.jsx("h1",{children:"Login"}),e.jsx(V,{btnTextContent:"Entrar",exampleObject:l,onSubmit:d,initialValues:l})]})},Ke=()=>e.jsx("div",{children:"pesquisar"}),Ye=()=>e.jsxs(ce,{children:[e.jsx(j,{path:"/",element:e.jsx(J,{})}),e.jsx(j,{path:"/login",element:e.jsx(J,{})}),e.jsx(j,{path:"/home",element:e.jsx(A,{children:e.jsx(De,{})})}),e.jsx(j,{path:"/:moduleName",element:e.jsx(A,{children:e.jsx(T,{children:e.jsx(R,{children:e.jsx(qe,{})})})})}),e.jsx(j,{path:"/:moduleName/novo",element:e.jsx(A,{children:e.jsx(T,{children:e.jsx(R,{children:e.jsx(We,{})})})})}),e.jsx(j,{path:"/:moduleName/editar/:id",element:e.jsx(A,{children:e.jsx(T,{children:e.jsx(R,{children:e.jsx(He,{})})})})}),e.jsx(j,{path:"/search",element:e.jsx(A,{children:e.jsx(T,{children:e.jsx(R,{children:e.jsx(Ke,{})})})})}),e.jsx(j,{path:"*",element:e.jsx(Te,{})})]}),Ze=()=>{const{loaded:a}=c.useContext($),s=[{path:"/home",label:"InÃ­cio"},{path:"/search",label:"Pesquisar"},...U.flatMap(({name:t,label:o})=>[{path:`/${t}`,label:o}])];return e.jsxs(e.Fragment,{children:[e.jsx(Ae,{}),e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-3 col-lg-2",children:e.jsx(Se,{links:s})}),e.jsx("div",{className:"col-12 col-md-9 col-lg-10",children:e.jsx(Ye,{})})]})}),!a&&e.jsx(C,{})]})},Ge=()=>`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,Qe=()=>{const[a,s]=c.useState([]),t=c.useCallback((o,r="info")=>{const n=Ge(),l={success:5e3,info:6e3,warning:7e3,danger:8e3}[r]||5e3;s(d=>[...d,{id:n,message:o,type:r,duration:l}]),setTimeout(()=>{s(d=>d.filter(m=>m.id!==n))},l)},[]);return window.addAlert=t,e.jsx("div",{className:"alert-container",children:a.map(o=>e.jsx(se,{message:o.message,type:o.type,duration:o.duration},o.id))})},Xe=()=>e.jsx(we,{children:e.jsxs(de,{children:[e.jsx(Ze,{}),e.jsx(Qe,{})]})});me.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(Xe,{})}));
